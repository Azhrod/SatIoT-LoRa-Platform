<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SatIoT-LoRa – Accueil</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class', theme: { extend: {} } };
  </script>
  <style>
    /* Empêcher le zoom sur le scroll */
    html {
      touch-action: manipulation;
    }
    
    /* Désactiver le zoom sur le globe de fond */
    #globeViz {
      pointer-events: none;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }
    
    /* Empêcher le zoom sur toute la page */
    body {
      touch-action: pan-x pan-y;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  </style>
  <!-- Three.js (obligatoire pour Globe.gl) -->
  <script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
  <!-- Globe.gl -->
  <script src="https://unpkg.com/globe.gl"></script>
  <!-- Flatpickr CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body class="bg-[#10131a] text-[#f3f6fa] font-sans antialiased">
  
  <!-- Header -->
  <header class="container mx-auto flex items-center justify-between py-6 px-4">
    <h1 class="text-2xl font-semibold cursor-pointer hover:text-[#3b82f6] transition-colors">
      <a href="/">SatIoT-LoRa</a>
    </h1>
    <nav>
      <ul class="flex space-x-8 text-[#7b8ca6]">
        <li><a href="/realtime" class="hover:text-white">Temps Réel</a></li>
        <li><a href="/integration" class="hover:text-white">Intégration LoRa</a></li>
        <li><a href="/protocol" class="hover:text-white">Protocole</a></li>
        <li><a href="/satellite" class="hover:text-white">Satellites</a></li>
        <li><a href="/documentation" class="hover:text-white">Documentation</a></li>
      </ul>      
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="relative min-h-screen flex items-center justify-center overflow-hidden">
    <!-- Background Globe -->
    <div id="globeViz" class="absolute inset-0 opacity-20"></div>
    
    <!-- Content Overlay -->
    <div class="relative z-10 text-center px-4 max-w-4xl mx-auto">
      <h1 class="text-6xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">
        SatIoT-LoRa
      </h1>
      <p class="text-xl md:text-2xl text-[#7b8ca6] mb-8 max-w-3xl mx-auto">
        Plateforme innovante de communication IoT par satellite utilisant la technologie LoRa et la constellation de satellites Kineis
      </p>
      <p class="text-lg text-[#9ca3af] mb-12 max-w-2xl mx-auto">
        Suivez les satellites en temps réel, prédisez les passages optimaux et optimisez vos transmissions IoT
      </p>
      
      <!-- CTA Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center mb-16">
        <a href="/realtime" 
           class="bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white font-semibold py-4 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg">
          Commencer le Suivi
        </a>
        <a href="/integration" 
           class="bg-[#181c23]/80 border border-[#23273a] hover:bg-[#23273a] text-white font-semibold py-4 px-8 rounded-lg transition-all duration-300 transform hover:scale-105">
          Découvrir la simulation LoRa
        </a>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-20 px-4">
    <div class="container mx-auto max-w-6xl">
      <h2 class="text-4xl font-bold text-center mb-16">Fonctionnalités Principales</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- Feature 1 -->
        <div class="bg-[#181c23]/90 backdrop-blur-md rounded-2xl p-8 border border-[#23273a] hover:border-[#3b82f6]/50 transition-all duration-300 transform hover:scale-105">
          <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center mb-6">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
            </svg>
          </div>
          <h3 class="text-2xl font-bold mb-4">Suivi Temps Réel</h3>
          <p class="text-[#7b8ca6] leading-relaxed">
            Visualisez la position des satellites en temps réel avec notre globe 3D interactif et suivez les passages optimaux.
          </p>
        </div>

        <!-- Feature 2 -->
        <div class="bg-[#181c23]/90 backdrop-blur-md rounded-2xl p-8 border border-[#23273a] hover:border-[#3b82f6]/50 transition-all duration-300 transform hover:scale-105">
          <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center mb-6">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
            </svg>
          </div>
          <h3 class="text-2xl font-bold mb-4">Prédictions Avancées</h3>
          <p class="text-[#7b8ca6] leading-relaxed">
            Anticipez les passages de satellites selon votre position géographique et optimisez vos transmissions IoT.
          </p>
        </div>

        <!-- Feature 3 -->
        <div class="bg-[#181c23]/90 backdrop-blur-md rounded-2xl p-8 border border-[#23273a] hover:border-[#3b82f6]/50 transition-all duration-300 transform hover:scale-105">
          <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center mb-6">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path>
            </svg>
          </div>
          <h3 class="text-2xl font-bold mb-4">Communication LoRa</h3>
          <p class="text-[#7b8ca6] leading-relaxed">
            Intégration complète avec la technologie LoRa pour des communications IoT longue portée et à faible consommation.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Access Section -->
  <section class="py-20 px-4 bg-[#181c23]/30">
    <div class="container mx-auto max-w-4xl">
      <h2 class="text-4xl font-bold text-center mb-16">Accès Rapide</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Prédictions Card -->
        <div class="bg-[#181c23]/90 backdrop-blur-md rounded-2xl p-8 border border-[#23273a] hover:border-[#3b82f6]/50 transition-all duration-300 transform hover:scale-105 group">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-2xl font-bold">Prédictions</h3>
            <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
              </svg>
            </div>
          </div>
          <p class="text-[#7b8ca6] mb-6">
            Anticipez les passages de satellites selon votre position et la période choisie.
          </p>
          <a href="/realtime" class="inline-flex items-center text-blue-400 hover:text-blue-300 font-semibold">
            Commencer les prédictions
            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>

        <!-- Temps Réel Card -->
        <div class="bg-[#181c23]/90 backdrop-blur-md rounded-2xl p-8 border border-[#23273a] hover:border-[#3b82f6]/50 transition-all duration-300 transform hover:scale-105 group">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-2xl font-bold">Temps Réel</h3>
            <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
              </svg>
            </div>
          </div>
          <p class="text-[#7b8ca6] mb-6">
            Suivez la position des satellites en temps réel et optimisez vos transmissions LoRa.
          </p>
          <a href="/realtime" class="inline-flex items-center text-green-400 hover:text-green-300 font-semibold">
            Voir le suivi temps réel
            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="container mx-auto text-center py-12 text-[#7b8ca6] border-t border-[#23273a]">
    <div class="mb-6">
      <h3 class="text-2xl font-bold mb-4">SatIoT-LoRa</h3>
      <p class="text-lg">Communication IoT par satellite</p>
    </div>
    <p>&copy; 2025 SatIoT-LoRa. Tous droits réservés.</p>
  </footer>

  <!-- Script Globe.gl pour le background -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const globeContainer = document.getElementById('globeViz');

      // Configuration du globe de fond
      const myGlobe = Globe()
        (globeContainer)
        .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-blue-marble.jpg')
        .bumpImageUrl('https://unpkg.com/three-globe/example/img/earth-topology.png')
        .backgroundImageUrl('https://unpkg.com/three-globe/example/img/night-sky.png')
        .width(globeContainer.offsetWidth)
        .height(globeContainer.offsetHeight)
        .autoRotate(true)
        .autoRotateSpeed(0.3)
        .enablePointerInteraction(false);

      window.addEventListener('resize', () => {
        myGlobe.width(globeContainer.offsetWidth);
        myGlobe.height(globeContainer.offsetHeight);
      });
    });
  </script>
  <script>
  document.getElementById('submit-btn').addEventListener('click', () => {
    const location = document.getElementById('location').value;
    const daterange = document.getElementById('daterange').value;

    console.log("Valeurs à envoyer :", location, daterange);
  });
  </script>
  <!-- Flatpickr (le calendrier) -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js"></script>
  <script>
    flatpickr("#daterange", {
      mode: "range",
      dateFormat: "Y-m-d",
      locale: "fr"
    });
  </script>
  <script>
  const locationInput = document.getElementById('location');
  const suggestionsList = document.getElementById('suggestions');

  let debounceTimeout = null;

  locationInput.addEventListener('input', () => {
    clearTimeout(debounceTimeout);
    debounceTimeout = setTimeout(async () => {
      const query = locationInput.value.trim();
      if (query.length < 3) {
        suggestionsList.innerHTML = '';
        suggestionsList.classList.add('hidden');
        return;
      }

      const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&addressdetails=1&limit=5`);
      const results = await response.json();

      const uniqueResults = new Set();
      suggestionsList.innerHTML = '';

      results.forEach(place => {
        const ville = place.address.city || place.address.town || place.address.village || place.address.hamlet || place.address.municipality || place.address.county || '';
        const pays = place.address.country || '';
        const label = `${ville}, ${pays}`;

        if (!ville || !pays || uniqueResults.has(label)) return;
        uniqueResults.add(label);

        const li = document.createElement('li');
        li.textContent = label;
        li.className = 'px-4 py-2 hover:bg-[#374151] cursor-pointer';
        li.addEventListener('click', () => {
          locationInput.value = label;
          suggestionsList.innerHTML = '';
          suggestionsList.classList.add('hidden');
        });
        suggestionsList.appendChild(li);
      });

      suggestionsList.classList.toggle('hidden', suggestionsList.children.length === 0);
    }, 300); // délai de 300ms après arrêt de frappe
  });

  // Cache la liste si on clique ailleurs
  document.addEventListener('click', (e) => {
    if (!locationInput.contains(e.target) && !suggestionsList.contains(e.target)) {
      suggestionsList.classList.add('hidden');
    }
  });
</script>

</body>
</html>
